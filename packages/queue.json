{
  "package": "Queue",
  "summary": "Manage work queues for distributed processing - add items, get next item, and track processing state.",
  "description": "## Overview The Queue package provides work queue management for distributed automation. Use it when you need to queue work items for processing, distribute work across multiple robots, or track the status of processed items.",
  "nodes": {
    "add-item": {
      "namespace": "Core.Queue.Add",
      "name": "AddItem",
      "summary": "Adds an item to the specified queue with the provided data and reference.",
      "howItWorks": "The Add Item node adds work items to a Robomotion Queue with encryption and deduplication: 1. Validates that the input data is an object (not primitive types) 2. Checks that the data size doesn't exceed 256KB limit 3. Retrieves encryption credentials from the vault (AES or RSA key pair) 4. If an ID Key is specified and present in the data: - Creates a SHA-256 hash of the ID value for deduplication - Stores the hashed ID to prevent duplicate items 5. Encrypts the data: - **AES**: Encrypts directly with the provided key - **RSA**: Generates a random AES key, encrypts data with AES, then encrypts the AES key with RSA 6. Sends encrypted data to the Robomotion Orchestrator queue 7. The item becomes available for processing by Get Next Item or Wait Item nodes",
      "usage": [
        "**Item** must be an object type (not string, number, array, etc.)",
        "Item size must not exceed 256KB (262,144 bytes)",
        "**Queue Name** must be specified",
        "Valid encryption key (AES or RSA key pair) must be configured in vault",
        "The queue must exist in Robomotion Orchestrator"
      ],
      "bestPractices": [
        "Item data must be a JavaScript object; primitive types (strings, numbers, booleans) are not allowed",
        "Arrays of objects are automatically split into individual queue items",
        "The ID Key enables deduplication - items with the same hashed ID won't be duplicated",
        "Data is encrypted before storage for security",
        "Maximum item size is 256KB - consider splitting large data into smaller chunks",
        "Priority determines processing order: High (3) \u003e Normal (2) \u003e Low (1)",
        "Maximum Try Count controls retry behavior for failed items",
        "Reference field is optional but useful for tracking batches or categories",
        "RSA encryption generates a unique AES key per item for added security",
        "Credentials must be stored in Robomotion vault before use"
      ],
      "errorCodes": [
        "Error",
        "ErrOnCreate",
        "ErrCredentials"
      ],
      "relatedNodes": [
        "Get Next Item",
        "Wait Item",
        "Update Item State",
        "Delete Item",
        "Get Items"
      ],
      "tips": [
        "Use ID Key to prevent duplicate work items (e.g., \"orderId\", \"transactionId\")",
        "Set appropriate priority levels - reserve High priority for truly urgent items",
        "Configure Maximum Try Count based on the operation's importance and flakiness",
        "Keep item sizes small for better performance - reference large files by URL instead of embedding",
        "Use meaningful Queue Names that indicate the purpose (e.g., \"EmailQueue\", \"DataProcessing\")",
        "Store credentials securely in vault - never hardcode encryption keys",
        "Add Reference values to categorize or batch related items",
        "Monitor queue depth to avoid overwhelming downstream processors",
        "Consider using separate queues for different priority levels instead of mixing priorities",
        "Test with small batches before adding thousands of items",
        "Use AES encryption for faster performance, RSA for higher security requirements"
      ],
      "credentials": [
        {
          "name": "aes_key",
          "title": "AES Encryption Key",
          "description": "AES encryption key for encrypting and decrypting queue item data. Use symmetric encryption for faster performance with large data.",
          "default": true,
          "fields": [
            {
              "name": "value",
              "title": "AES Key",
              "type": "password",
              "required": true,
              "placeholder": "32-character key for AES-256",
              "description": "AES encryption key (16, 24, or 32 characters for AES-128, AES-192, or AES-256)"
            }
          ],
          "help": [
            "AES (Advanced Encryption Standard) is a symmetric encryption algorithm",
            "Use the same key for encryption and decryption",
            "Key lengths: 16 chars (AES-128), 24 chars (AES-192), 32 chars (AES-256)",
            "Generate a secure random key - do not use predictable passwords",
            "Example key generation: openssl rand -base64 32 | head -c 32"
          ]
        },
        {
          "name": "rsa_keypair",
          "title": "RSA Key Pair",
          "description": "RSA key pair for asymmetric encryption of queue items. Use when you need separate encryption and decryption capabilities.",
          "fields": [
            {
              "name": "publicKey",
              "title": "Public Key",
              "type": "textarea",
              "required": true,
              "placeholder": "-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----",
              "description": "RSA public key in PEM format (for encryption)"
            },
            {
              "name": "privateKey",
              "title": "Private Key",
              "type": "textarea",
              "required": true,
              "placeholder": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----",
              "description": "RSA private key in PEM format (for decryption)"
            }
          ],
          "help": [
            "RSA is an asymmetric encryption algorithm",
            "Public key encrypts, private key decrypts",
            "More secure for scenarios where encryption and decryption happen on different systems",
            "Generate keys: openssl genrsa -out private.pem 2048",
            "Extract public key: openssl rsa -in private.pem -pubout -out public.pem"
          ]
        }
      ]
    },
    "delete-item": {
      "namespace": "Core.Queue.Delete",
      "name": "DeleteItem",
      "summary": "Removes an item from the specified queue using the provided item ID.",
      "howItWorks": "The Delete Item node permanently removes an item from a Robomotion Queue: 1. Receives the Item ID of the queue item to delete 2. Sends a delete request to the Robomotion Orchestrator API 3. The Orchestrator removes the item from the queue permanently 4. Returns success or error response 5. The message passes through unchanged",
      "usage": [
        "**Item ID** must be provided (typically from Get Next Item or Wait Item output)",
        "The item must exist in the queue",
        "Appropriate permissions to delete from the queue"
      ],
      "bestPractices": [
        "Deletion is permanent - deleted items cannot be recovered",
        "Delete immediately after processing to keep queue clean",
        "Do not delete items that may need retry - use Update Item State instead",
        "Item ID typically comes from Get Next Item or Wait Item nodes",
        "Failed deletions will throw an error (unless Continue On Error is enabled)",
        "Deleting non-existent items will result in an error"
      ],
      "errorCodes": [
        "Error",
        "ErrOnCreate"
      ],
      "relatedNodes": [
        "Get Next Item",
        "Update Item State",
        "Get Items",
        "Add Item"
      ],
      "tips": [
        "Delete items only after confirming successful processing",
        "For items that might need retry, use Update Item State with \"Successful\" status instead",
        "Log the Item ID before deletion for audit trail",
        "Use Continue On Error cautiously - failed deletions might indicate issues",
        "In error scenarios, consider moving items to a \"failed\" queue instead of deleting",
        "Combine with Get Items to bulk delete old or invalid items",
        "Don't delete items during processing - wait until completion",
        "Consider archiving important data before deletion",
        "Monitor deletion failures as they may indicate permission or connectivity issues"
      ],
      "credentials": [
        {
          "name": "aes_key",
          "title": "AES Encryption Key",
          "description": "AES encryption key for encrypting and decrypting queue item data. Use symmetric encryption for faster performance with large data.",
          "default": true,
          "fields": [
            {
              "name": "value",
              "title": "AES Key",
              "type": "password",
              "required": true,
              "placeholder": "32-character key for AES-256",
              "description": "AES encryption key (16, 24, or 32 characters for AES-128, AES-192, or AES-256)"
            }
          ],
          "help": [
            "AES (Advanced Encryption Standard) is a symmetric encryption algorithm",
            "Use the same key for encryption and decryption",
            "Key lengths: 16 chars (AES-128), 24 chars (AES-192), 32 chars (AES-256)",
            "Generate a secure random key - do not use predictable passwords",
            "Example key generation: openssl rand -base64 32 | head -c 32"
          ]
        },
        {
          "name": "rsa_keypair",
          "title": "RSA Key Pair",
          "description": "RSA key pair for asymmetric encryption of queue items. Use when you need separate encryption and decryption capabilities.",
          "fields": [
            {
              "name": "publicKey",
              "title": "Public Key",
              "type": "textarea",
              "required": true,
              "placeholder": "-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----",
              "description": "RSA public key in PEM format (for encryption)"
            },
            {
              "name": "privateKey",
              "title": "Private Key",
              "type": "textarea",
              "required": true,
              "placeholder": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----",
              "description": "RSA private key in PEM format (for decryption)"
            }
          ],
          "help": [
            "RSA is an asymmetric encryption algorithm",
            "Public key encrypts, private key decrypts",
            "More secure for scenarios where encryption and decryption happen on different systems",
            "Generate keys: openssl genrsa -out private.pem 2048",
            "Extract public key: openssl rsa -in private.pem -pubout -out public.pem"
          ]
        }
      ]
    },
    "get-items": {
      "namespace": "Core.Queue.GetAll",
      "name": "GetItems",
      "summary": "Retrieves items from a specified Queue in Orchestrator",
      "howItWorks": "The Get Items node retrieves multiple items from a queue based on filter criteria: 1. Accepts filter parameters (Progress, Priority, Status) 2. Retrieves encryption credentials from the vault 3. Queries the Robomotion Orchestrator API with filters 4. Receives encrypted items matching the criteria 5. Decrypts each item using AES or RSA decryption 6. Outputs an array of decrypted items with metadata 7. Does NOT start transactions or modify item states",
      "usage": [
        "**Queue Name** must be specified",
        "Valid encryption key (AES or RSA key pair) in vault matching the one used when adding items",
        "Appropriate permissions to access the queue"
      ],
      "bestPractices": [
        "When `Continue On Error` is enabled, errors are **not** caught even if Catch node is present",
        "This node does NOT start transactions or lock items",
        "Returns all items matching the filters - could be large result set",
        "Items include metadata: ID, TryCount, MaxTryCount, CreatedAt, UpdatedAt",
        "Data is automatically decrypted before output",
        "Does not modify queue item states",
        "Use for monitoring, reporting, or bulk operations",
        "Not suitable for processing workflows - use Get Next Item instead"
      ],
      "errorCodes": [
        "Error",
        "ErrOnCreate",
        "ErrCredentials"
      ],
      "relatedNodes": [
        "Get Next Item",
        "Wait Item",
        "Update Item State",
        "Delete Item",
        "Add Item"
      ],
      "tips": [
        "Use specific filters to avoid retrieving too many items",
        "For processing workflows, use Get Next Item or Wait Item instead",
        "Combine with Loop nodes to process retrieved items",
        "Use for queue monitoring dashboards and reports",
        "Filter by Status to find Failed items needing attention",
        "Check Progress \"inProgress\" to see what robots are currently working on",
        "This node is read-only - it doesn't change item states",
        "Cache credentials to avoid repeated vault lookups",
        "Use for bulk cleanup operations combined with Delete Item",
        "Monitor item counts to detect queue backlogs"
      ],
      "credentials": [
        {
          "name": "aes_key",
          "title": "AES Encryption Key",
          "description": "AES encryption key for encrypting and decrypting queue item data. Use symmetric encryption for faster performance with large data.",
          "default": true,
          "fields": [
            {
              "name": "value",
              "title": "AES Key",
              "type": "password",
              "required": true,
              "placeholder": "32-character key for AES-256",
              "description": "AES encryption key (16, 24, or 32 characters for AES-128, AES-192, or AES-256)"
            }
          ],
          "help": [
            "AES (Advanced Encryption Standard) is a symmetric encryption algorithm",
            "Use the same key for encryption and decryption",
            "Key lengths: 16 chars (AES-128), 24 chars (AES-192), 32 chars (AES-256)",
            "Generate a secure random key - do not use predictable passwords",
            "Example key generation: openssl rand -base64 32 | head -c 32"
          ]
        },
        {
          "name": "rsa_keypair",
          "title": "RSA Key Pair",
          "description": "RSA key pair for asymmetric encryption of queue items. Use when you need separate encryption and decryption capabilities.",
          "fields": [
            {
              "name": "publicKey",
              "title": "Public Key",
              "type": "textarea",
              "required": true,
              "placeholder": "-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----",
              "description": "RSA public key in PEM format (for encryption)"
            },
            {
              "name": "privateKey",
              "title": "Private Key",
              "type": "textarea",
              "required": true,
              "placeholder": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----",
              "description": "RSA private key in PEM format (for decryption)"
            }
          ],
          "help": [
            "RSA is an asymmetric encryption algorithm",
            "Public key encrypts, private key decrypts",
            "More secure for scenarios where encryption and decryption happen on different systems",
            "Generate keys: openssl genrsa -out private.pem 2048",
            "Extract public key: openssl rsa -in private.pem -pubout -out public.pem"
          ]
        }
      ]
    },
    "get-next-item": {
      "namespace": "Get Next Item node",
      "name": "GetNextItem",
      "summary": "Retrieves the next item from a specified queue.",
      "howItWorks": "The Get Next Item node retrieves the highest priority available item from a queue: 1. Queries the Robomotion Orchestrator for the next available item (highest priority first) 2. If **Start Transaction** is true: - Marks the item as \"inProgress\" - Decrements the try count - Assigns the item to this robot 3. If no item is available, outputs null for Item ID and Item 4. If an item exists: - Retrieves encrypted data - Decrypts using AES or RSA decryption - Outputs Item ID and decrypted Item data 5. Robot can then process the item and update its state",
      "usage": [
        "**Queue Name** must be specified",
        "Valid encryption key (AES or RSA key pair) in vault matching the one used when adding items",
        "Items must exist in the queue (or outputs will be null)"
      ],
      "bestPractices": [
        "When `Continue On Error` is enabled, errors are **not** caught even if Catch node is present",
        "**Start Transaction true**: Decrements try count and marks item as in-progress",
        "**Start Transaction false**: Retrieves item without modifying state (read-only peek)",
        "Returns highest priority item first (High \u003e Normal \u003e Low)",
        "Within same priority, processes oldest items first (FIFO)",
        "If queue is empty, Item ID and Item outputs are null",
        "Always check if Item ID is null before processing",
        "Transaction must be completed with Update Item State or Delete Item",
        "Item remains \"inProgress\" until state is updated"
      ],
      "errorCodes": [
        "Error",
        "ErrOnCreate",
        "ErrCredentials"
      ],
      "relatedNodes": [
        "Wait Item",
        "Update Item State",
        "Delete Item",
        "Add Item",
        "Get Items"
      ],
      "tips": [
        "Always use Start Transaction: true for processing workflows",
        "Check if itemId is null before attempting to process",
        "Always update item state (Successful/Failed) after processing",
        "Use Try-Catch blocks to handle processing errors gracefully",
        "Set appropriate Maximum Try Count when adding items (based on expected failure rate)",
        "Delete items after successful processing to keep queue clean",
        "Use Update Item State with \"Failed\" for retriable errors",
        "Use \"Abandoned\" status for items that exceeded max retries",
        "Monitor failed items and investigate root causes",
        "Combine with Should Stop node for graceful shutdown in long-running processes",
        "Use Progress field in Update Item State to track processing stages"
      ]
    },
    "update-item-state": {
      "namespace": "Core.Queue.Update",
      "name": "UpdateItemState",
      "summary": "Updates the state of a queue item",
      "howItWorks": "The Update Item State node modifies the state and properties of a queue item: 1. Receives Item ID and state update parameters 2. Validates inputs (Item ID, Progress, Priority, Status, etc.) 3. Sends update request to Robomotion Orchestrator 4. Updates item properties: - **Progress**: Custom text to track processing stages - **Priority**: Changes item priority (Low/Normal/High) - **Status**: Marks as Successful, Failed, or Abandoned - **Additional Try Count**: Adds more retry attempts - **Reference**: Updates reference information 5. The updated item becomes available based on new state",
      "usage": [
        "**Item ID** must be provided (from Get Next Item or Wait Item)",
        "The item must exist in the queue",
        "Appropriate permissions to update queue items"
      ],
      "bestPractices": [
        "When `Continue On Error` is enabled, errors are **not** caught even if Catch node is present",
        "**Status** values:",
        "**Successful**: Item completed successfully, won't be retried",
        "**Failed**: Item failed, will retry if attempts remain",
        "**Abandoned**: Item exceeded max retries or permanently failed",
        "**Priority** values: Low (1), Normal (2), High (3)",
        "**Progress** is a freeform text field for tracking stages",
        "**Additional Try Count** adds more retry attempts to the item",
        "**Reference** can be updated to add notes or error messages",
        "Updating status to Successful or Abandoned removes item from active processing",
        "Failed items return to queue for retry if try count allows"
      ],
      "errorCodes": [
        "Error",
        "ErrOnCreate"
      ],
      "relatedNodes": [
        "Get Next Item",
        "Wait Item",
        "Delete Item",
        "Get Items",
        "Add Item"
      ],
      "tips": [
        "Always update status after processing (Successful or Failed)",
        "Use Progress field to track multi-step processing for debugging",
        "Add error messages to Reference for failed items",
        "Set Status to Successful before Delete Item to maintain clean audit trail",
        "Use Failed status for retriable errors (network issues, temporary failures)",
        "Use Abandoned status for permanent failures (data corruption, business rule violations)",
        "Increase Additional Try Count cautiously - investigate why retries are needed",
        "Update Priority to escalate urgent items",
        "Track Progress for long-running processes to show intermediate states",
        "Combine with Log node to record state changes",
        "Use reference field to store error details or processing notes"
      ],
      "credentials": [
        {
          "name": "aes_key",
          "title": "AES Encryption Key",
          "description": "AES encryption key for encrypting and decrypting queue item data. Use symmetric encryption for faster performance with large data.",
          "default": true,
          "fields": [
            {
              "name": "value",
              "title": "AES Key",
              "type": "password",
              "required": true,
              "placeholder": "32-character key for AES-256",
              "description": "AES encryption key (16, 24, or 32 characters for AES-128, AES-192, or AES-256)"
            }
          ],
          "help": [
            "AES (Advanced Encryption Standard) is a symmetric encryption algorithm",
            "Use the same key for encryption and decryption",
            "Key lengths: 16 chars (AES-128), 24 chars (AES-192), 32 chars (AES-256)",
            "Generate a secure random key - do not use predictable passwords",
            "Example key generation: openssl rand -base64 32 | head -c 32"
          ]
        },
        {
          "name": "rsa_keypair",
          "title": "RSA Key Pair",
          "description": "RSA key pair for asymmetric encryption of queue items. Use when you need separate encryption and decryption capabilities.",
          "fields": [
            {
              "name": "publicKey",
              "title": "Public Key",
              "type": "textarea",
              "required": true,
              "placeholder": "-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----",
              "description": "RSA public key in PEM format (for encryption)"
            },
            {
              "name": "privateKey",
              "title": "Private Key",
              "type": "textarea",
              "required": true,
              "placeholder": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----",
              "description": "RSA private key in PEM format (for decryption)"
            }
          ],
          "help": [
            "RSA is an asymmetric encryption algorithm",
            "Public key encrypts, private key decrypts",
            "More secure for scenarios where encryption and decryption happen on different systems",
            "Generate keys: openssl genrsa -out private.pem 2048",
            "Extract public key: openssl rsa -in private.pem -pubout -out public.pem"
          ]
        }
      ]
    },
    "wait-item": {
      "namespace": "Core.Queue.Wait",
      "name": "WaitItem",
      "summary": "Waits to retrieve a new item from the specified Robomotion Queue.",
      "howItWorks": "The Wait Item node continuously polls a queue until an item becomes available or timeout occurs: 1. Immediately checks for available items (first attempt) 2. If item found: - If Start Transaction is true, marks as \"inProgress\" and decrements try count - Decrypts and outputs the item - Execution continues 3. If no item found and timeout not reached: - Waits for Poll Time duration - Checks again (repeats) 4. If timeout reached without finding item: - Throws timeout error 5. Minimum Poll Time is 30 seconds (automatically adjusted if set lower)",
      "usage": [
        "**Queue Name** must be specified",
        "Valid encryption key (AES or RSA key pair) matching the one used when adding items",
        "Poll Time should be reasonable (minimum 30 seconds, default 30 seconds)",
        "Timeout should be greater than Poll Time (or 0 for infinite wait)"
      ],
      "bestPractices": [
        "When `Continue On Error` is enabled, errors are **not** caught even if Catch node is present",
        "Default and minimum Poll Time is 30 seconds (values below 30 are adjusted to 30)",
        "Timeout of 0 means wait indefinitely until item arrives",
        "Unlike Get Next Item, Wait Item blocks until item available or timeout",
        "Checks occur at: t=0s, t=PollTime, t=2Ã—PollTime, etc.",
        "If timeout occurs exactly when checking, still attempts to get item before failing",
        "Start Transaction true: marks item as inProgress and decrements try count",
        "Network errors during polling will throw error and stop waiting",
        "Closing the flow during wait triggers \"Terminate\" error"
      ],
      "errorCodes": [
        "Error",
        "ErrOnCreate",
        "ErrCredentials",
        "ErrTimeout"
      ],
      "relatedNodes": [
        "Get Next Item",
        "Update Item State",
        "Delete Item",
        "Should Stop",
        "Add Item"
      ],
      "tips": [
        "Use Wait Item for event-driven workflows where you expect items to arrive",
        "Use Get Next Item for polling-based workflows where items may not always be available",
        "Set Poll Time based on expected item arrival frequency (30s for frequent, 60-300s for infrequent)",
        "For continuous processing, use infinite timeout (0) and graceful shutdown with Should Stop",
        "Combine with Should Stop node to allow clean shutdown during long waits",
        "Handle timeout errors appropriately (they're not always failures)",
        "Use reasonable timeouts to avoid indefinite blocking",
        "For critical processes, use shorter poll times (30-60s)",
        "For background processes, longer poll times (120-300s) reduce API load",
        "Always use Start Transaction: true for processing workflows",
        "Catch timeout errors if empty queue is a valid state",
        "Monitor polling frequency to avoid overloading the Orchestrator"
      ],
      "credentials": [
        {
          "name": "aes_key",
          "title": "AES Encryption Key",
          "description": "AES encryption key for encrypting and decrypting queue item data. Use symmetric encryption for faster performance with large data.",
          "default": true,
          "fields": [
            {
              "name": "value",
              "title": "AES Key",
              "type": "password",
              "required": true,
              "placeholder": "32-character key for AES-256",
              "description": "AES encryption key (16, 24, or 32 characters for AES-128, AES-192, or AES-256)"
            }
          ],
          "help": [
            "AES (Advanced Encryption Standard) is a symmetric encryption algorithm",
            "Use the same key for encryption and decryption",
            "Key lengths: 16 chars (AES-128), 24 chars (AES-192), 32 chars (AES-256)",
            "Generate a secure random key - do not use predictable passwords",
            "Example key generation: openssl rand -base64 32 | head -c 32"
          ]
        },
        {
          "name": "rsa_keypair",
          "title": "RSA Key Pair",
          "description": "RSA key pair for asymmetric encryption of queue items. Use when you need separate encryption and decryption capabilities.",
          "fields": [
            {
              "name": "publicKey",
              "title": "Public Key",
              "type": "textarea",
              "required": true,
              "placeholder": "-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----",
              "description": "RSA public key in PEM format (for encryption)"
            },
            {
              "name": "privateKey",
              "title": "Private Key",
              "type": "textarea",
              "required": true,
              "placeholder": "-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----",
              "description": "RSA private key in PEM format (for decryption)"
            }
          ],
          "help": [
            "RSA is an asymmetric encryption algorithm",
            "Public key encrypts, private key decrypts",
            "More secure for scenarios where encryption and decryption happen on different systems",
            "Generate keys: openssl genrsa -out private.pem 2048",
            "Extract public key: openssl rsa -in private.pem -pubout -out public.pem"
          ]
        }
      ]
    }
  }
}