{
  "package": "Discord",
  "summary": "The Discord Bot package enables you to build powerful automation workflows and interactive bots for Discord. Use this package to automate channel operations, send and receive messages, create slash commands, handle interactions, manage roles, and build comprehensive Discord bot applications.",
  "description": "## Key Features - **Connection Management** - Connect to Discord using bot tokens with persistent sessions",
  "nodes": {
    "addrolemember": {
      "namespace": "Robomotion.DiscordBot.AddRoleMember",
      "name": "Addrolemember",
      "summary": "Assigns a role to a Discord server member.",
      "howItWorks": "The Add Role Member node assigns a role to a server member. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the server ID, user ID, and role ID 3. Sends a role assignment request to Discord API 4. Adds the role to the specified user",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid server ID, user ID, and role ID",
        "Manage Roles permission in the server",
        "Bot's highest role must be higher than the role being assigned",
        "The user must be a member of the server"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ]
    },
    "connect": {
      "namespace": "Robomotion.DiscordBot.Connect",
      "name": "Connect",
      "summary": "Establishes a connection to Discord using a bot token and returns a client ID for use in subsequent Discord operations.",
      "howItWorks": "The Connect node is the first step in many Discord automation flows. It creates a Discord bot session and stores it for reuse by other nodes. When executed, the node: 1. Retrieves the bot token from the provided credentials 2. Creates a new Discord bot session using the token 3. Stores the bot session in a thread-safe session manager 4. Returns a unique Client ID that references this session 5. This Client ID is then used by other Discord nodes to access the bot",
      "usage": [
        "A Discord application with a bot user",
        "A valid Discord bot token",
        "The bot token must be stored as a credential in Robomotion",
        "Appropriate bot permissions configured in the Discord Developer Portal"
      ],
      "bestPractices": [
        "The Connect node should be executed before other Discord operations",
        "The returned Client ID must be passed to subsequent Discord nodes",
        "Each Connect node creates a new session entry",
        "Use the Disconnect node to clean up the session when it's no longer needed",
        "The bot session is stored in memory and automatically removed when the flow stops"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ]
    },
    "createchannel": {
      "namespace": "Robomotion.DiscordBot.CreateChannel",
      "name": "Createchannel",
      "summary": "Creates a new text or voice channel in a Discord server.",
      "howItWorks": "The Create Channel node creates a new channel in the specified Discord server. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the server ID and channel name 3. Determines the channel type (text or voice) 4. Sends a create channel request to Discord API 5. Creates the channel with the specified name and type",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid server (guild) ID",
        "Manage Channels permission in the target server",
        "The bot must be a member of the server"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ]
    },
    "createcommand": {
      "namespace": "Robomotion.DiscordBot.CreateCommand",
      "name": "Createcommand",
      "summary": "Creates a Discord slash command (application command) that users can invoke with `/` in Discord.",
      "howItWorks": "The Create Command node registers a slash command with Discord. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the application ID 3. Parses the command JSON configuration 4. Processes any mustache template variables in the JSON 5. Sends the command registration request to Discord API 6. Creates the command (globally or for a specific server)",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid application ID (from Discord Developer Portal)",
        "**applications.commands** scope enabled for the bot",
        "Properly formatted command JSON"
      ],
      "errorCodes": [
        "ErrInvalidArg",
        "ErrUnmarshal",
        "ErrCommandCreate",
        "Error"
      ]
    },
    "createforumpost": {
      "namespace": "Robomotion.DiscordBot.CreateForumPost",
      "name": "Createforumpost",
      "summary": "Creates a new post in a Discord forum channel with support for rich content including embeds, file attachments, and buttons.",
      "howItWorks": "The Create Forum Post node creates a new thread post in a forum channel. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the channel ID, post title, and message text 3. Constructs the post with optional components (files, embeds, buttons) 4. Sets the auto-archive duration if specified 5. Processes file attachments if provided 6. Sends the create forum post request to Discord API 7. Returns the complete post object including the thread ID",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid forum channel ID",
        "Send Messages and Create Public Threads permissions",
        "The channel must be a forum channel (type 15)"
      ],
      "errorCodes": [
        "ErrInvalidArg",
        "ErrInternal"
      ]
    },
    "createinvitelink": {
      "namespace": "Robomotion.DiscordBot.CreateInviteLink",
      "name": "Createinvitelink",
      "summary": "Generates an invitation link for a Discord channel.",
      "howItWorks": "The Create Invite Link node generates a temporary invitation link for a Discord channel. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the channel ID 3. Creates an invite with temporary settings 4. Constructs the full invite URL 5. Returns the complete invite link",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid channel ID",
        "Create Instant Invite permission in the target channel",
        "The bot must be a member of the server"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ]
    },
    "deletechannel": {
      "namespace": "Robomotion.DiscordBot.DeleteChannel",
      "name": "Deletechannel",
      "summary": "Deletes a Discord channel from a server.",
      "howItWorks": "The Delete Channel node permanently removes a channel from a Discord server. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the channel ID 3. Sends a delete channel request to Discord API 4. Permanently removes the channel and all its contents",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid channel ID",
        "Manage Channels permission in the server",
        "The bot must be a member of the server"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ]
    },
    "deletechannelmessage": {
      "namespace": "Robomotion.DiscordBot.DeleteChannelMessage",
      "name": "Deletechannelmessage",
      "summary": "Deletes a specific message from a Discord channel.",
      "howItWorks": "The Delete Channel Message node removes a specific message from a Discord channel. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the channel ID and message ID 3. Sends a delete message request to Discord API 4. Permanently removes the message",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid channel ID and message ID",
        "Appropriate permissions (see below)",
        "The message must exist and not already be deleted"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ]
    },
    "deletecommand": {
      "namespace": "Robomotion.DiscordBot.DeleteCommand",
      "name": "Deletecommand",
      "summary": "Deletes a registered Discord slash command.",
      "howItWorks": "The Delete Command node removes a slash command registration. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the application ID and command ID 3. Sends a delete command request to Discord API 4. Removes the command (globally or from the specified server)",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid application ID and command ID",
        "**applications.commands** scope enabled"
      ],
      "errorCodes": [
        "ErrInvalidArg",
        "ErrInternal",
        "Error"
      ]
    },
    "disconnect": {
      "namespace": "Robomotion.DiscordBot.Disconnect",
      "name": "Disconnect",
      "summary": "Disconnects from Discord and closes the bot session, cleaning up resources.",
      "howItWorks": "The Disconnect node properly closes a Discord bot session and removes it from memory. When executed, the node: 1. Validates the provided Client ID 2. Retrieves the bot session associated with the Client ID 3. Closes the Discord WebSocket connection 4. Removes the session from the session manager 5. Frees up system resources",
      "usage": [
        "A valid Client ID from a Connect node",
        "An active Discord bot session"
      ],
      "bestPractices": [
        "Always use Disconnect when you're finished with Discord operations",
        "Disconnect frees up system resources and closes WebSocket connections",
        "After disconnecting, the Client ID becomes invalid",
        "You'll need to use Connect again to create a new session",
        "The session is automatically cleaned up when the flow stops, but it's best practice to explicitly disconnect"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ]
    },
    "editmessage": {
      "namespace": "Robomotion.DiscordBot.EditMessage",
      "name": "Editmessage",
      "summary": "Edits the content of an existing message in a Discord channel.",
      "howItWorks": "The Edit Channel Message node modifies the content of an existing message. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the channel ID, message ID, and new message text 3. Constructs the edit request with the new content 4. Sends the edit request to Discord API 5. Updates the message with the new text",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid channel ID and message ID",
        "The message must have been sent by the bot (cannot edit other users' messages)",
        "New message text must not be empty"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ]
    },
    "getchannelinfo": {
      "namespace": "Robomotion.DiscordBot.GetChannelInfo",
      "name": "Getchannelinfo",
      "summary": "Retrieves detailed information about a Discord channel.",
      "howItWorks": "The Get Channel Info node retrieves complete information about a specific Discord channel. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the channel ID 3. Requests channel information from Discord API 4. Returns the complete channel object with all details",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid channel ID",
        "View Channel permission",
        "The bot must be a member of the server (for server channels)"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ]
    },
    "getchannelmessages": {
      "namespace": "Robomotion.DiscordBot.GetChannelMessages",
      "name": "Getchannelmessages",
      "summary": "Retrieves messages from a Discord channel with pagination support.",
      "howItWorks": "The Get Channel Messages node retrieves historical messages from a Discord channel. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the channel ID and message ID 3. Determines the pagination direction 4. Requests messages from Discord API 5. Returns an array of message objects",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid channel ID and reference message ID",
        "Read Message History permission in the channel",
        "The bot must be a member of the server"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ]
    },
    "getuserinfo": {
      "namespace": "Robomotion.DiscordBot.GetUserInfo",
      "name": "Getuserinfo",
      "summary": "Retrieves detailed information about a Discord user.",
      "howItWorks": "The Get User Info node retrieves complete information about a specific Discord user. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the user ID 3. Requests user information from Discord API 4. Returns the complete user object with all details",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid user ID",
        "The bot and user should share at least one mutual server (for complete info)"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ]
    },
    "interactionin": {
      "namespace": "Robomotion.DiscordBot.InteractionIn",
      "name": "Interactionin",
      "summary": "Listens for Discord interactions including slash command invocations, button clicks, modal submissions, and autocomplete requests. This node has no inputs and acts as a trigger node.",
      "howItWorks": "The Interaction In node creates a persistent WebSocket connection to Discord and listens for interactions. When executed, the node: 1. Retrieves the bot token from credentials 2. Creates a Discord bot session 3. Opens a WebSocket connection to Discord 4. Adds an interaction event handler 5. Applies filters based on type, server, channel, sender, and command name 6. Emits the interaction object when a matching interaction is received 7. Continues listening until the flow is stopped",
      "usage": [
        "A valid Discord bot token",
        "The bot must be added to servers where it will receive interactions",
        "Slash commands must be registered (for command interactions)",
        "Appropriate intents enabled in Discord Developer Portal"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ],
      "credentials": [
        {
          "name": "Bot Token",
          "title": "apiKey",
          "description": "Discord bot token for authentication. Get this from the Discord Developer Portal.",
          "fields": [
            {
              "name": "value",
              "title": "Bot Token",
              "type": "string",
              "required": true,
              "description": "Your Discord bot token from the Developer Portal"
            }
          ]
        }
      ]
    },
    "interactionout": {
      "namespace": "Robomotion.DiscordBot.InteractionOut",
      "name": "Interactionout",
      "summary": "Sends a response to a Discord interaction. Must be used after Interaction In to acknowledge and respond to user interactions.",
      "howItWorks": "The Interaction Out node sends a response to a Discord interaction. When executed, the node: 1. Validates the interaction ID 2. Retrieves the interaction session 3. Parses the response JSON configuration 4. Processes any mustache template variables in the JSON 5. Determines the response type (message, modal, deferred, autocomplete) 6. Sends the appropriate response to Discord 7. Removes the interaction from the session manager",
      "usage": [
        "Valid interaction ID from an Interaction In node",
        "Properly formatted response JSON",
        "Response must be sent within 3 seconds of receiving the interaction"
      ],
      "errorCodes": [
        "ErrInvalidArg",
        "ErrJsonParse"
      ]
    },
    "listcommands": {
      "namespace": "Robomotion.DiscordBot.ListCommands",
      "name": "Listcommands",
      "summary": "Retrieves all registered Discord slash commands for an application.",
      "howItWorks": "The List Commands node retrieves all slash commands registered for your application. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the application ID 3. Requests command list from Discord API (global or server-specific) 4. Returns an array of command objects",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid application ID",
        "**applications.commands** scope enabled"
      ],
      "errorCodes": [
        "ErrInvalidArg",
        "ErrInternal",
        "Error"
      ]
    },
    "receivemessage": {
      "namespace": "Robomotion.DiscordBot.ReceiveMessage",
      "name": "Receivemessage",
      "summary": "Listens for incoming messages from Discord channels and triggers your automation flow when messages are received. This node has no inputs and acts as a trigger node.",
      "howItWorks": "The Receive Message node creates a persistent WebSocket connection to Discord and listens for incoming messages. When executed, the node: 1. Retrieves the bot token from credentials 2. Creates a Discord bot session 3. Opens a WebSocket connection to Discord 4. Adds a message event handler 5. Applies filters based on Server Id, Channel Id, and Sender Id options 6. Emits the message object when a matching message is received 7. Continues listening until the flow is stopped",
      "usage": [
        "A valid Discord bot token",
        "The bot must be added to the server you want to monitor",
        "**Message Content Intent** must be enabled in Discord Developer Portal",
        "Read Messages permission in the target channels"
      ],
      "bestPractices": [
        "This is a trigger node with no inputs - it starts automatically when the flow runs",
        "The node runs continuously until the flow is stopped",
        "Each received message triggers one execution of the connected nodes",
        "The bot must have appropriate permissions to read messages",
        "Messages sent by the bot itself are also received (consider filtering them in your flow)"
      ],
      "errorCodes": [
        "ErrInvalidArg"
      ],
      "credentials": [
        {
          "name": "Bot Token",
          "title": "apiKey",
          "description": "Discord bot token for authentication. Get this from the Discord Developer Portal.",
          "fields": [
            {
              "name": "value",
              "title": "Bot Token",
              "type": "string",
              "required": true,
              "description": "Your Discord bot token from the Developer Portal"
            }
          ]
        }
      ]
    },
    "removerolemember": {
      "namespace": "Robomotion.DiscordBot.RemoveRoleMember",
      "name": "Removerolemember",
      "summary": "Removes a role from a Discord server member.",
      "howItWorks": "The Remove Role Member node removes a role from a server member. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the server ID, user ID, and role ID 3. Sends a role removal request to Discord API 4. Removes the role from the specified user",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid server ID, user ID, and role ID",
        "Manage Roles permission in the server",
        "Bot's highest role must be higher than the role being removed",
        "The user must currently have the role"
      ]
    },
    "senddirectmessage": {
      "namespace": "Robomotion.DiscordBot.SendDirectMessage",
      "name": "Senddirectmessage",
      "summary": "Sends a direct message (DM) to a Discord user with support for rich content including embeds, file attachments, buttons, and message replies.",
      "howItWorks": "The Send Direct Message node creates a DM channel with the user (if it doesn't exist) and sends a message to it. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the user ID and message text 3. Creates or retrieves the DM channel with the specified user 4. Constructs the message with optional components (files, embeds, buttons) 5. Processes file attachments if provided 6. Sends the message to the DM channel 7. Returns the complete message object",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid user ID (the bot and user must share at least one server)",
        "User must have DMs enabled and not have the bot blocked"
      ],
      "errorCodes": [
        "ErrInvalidArg",
        "ErrInternal"
      ]
    },
    "sendmessage": {
      "namespace": "Robomotion.DiscordBot.SendMessage",
      "name": "Sendmessage",
      "summary": "Sends a message to a Discord channel with support for rich content including embeds, file attachments, buttons, and message replies.",
      "howItWorks": "The Send Channel Message node sends messages to Discord channels with various content types. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the channel ID and message text 3. Constructs the message with optional components (files, embeds, buttons) 4. Processes file attachments if provided 5. Adds reply reference if replying to another message 6. Sends the message to Discord via the API 7. Returns the complete message object",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid channel ID (enable Developer Mode in Discord to copy IDs)",
        "Send Messages permission in the target channel",
        "Attach Files permission (if sending files)",
        "Embed Links permission (if sending embeds)"
      ],
      "errorCodes": [
        "ErrInvalidArg",
        "ErrInternal"
      ]
    },
    "updateinteractionresponse": {
      "namespace": "Robomotion.DiscordBot.UpdateInteractionRespond",
      "name": "Updateinteractionresponse",
      "summary": "Updates a deferred interaction response with the final content. Used after sending a deferred response to provide the actual result.",
      "howItWorks": "The Update Interaction Respond node edits a previously sent deferred interaction response. When executed, the node: 1. Authenticates using either Client ID or direct bot token 2. Validates the application ID and interaction token 3. Parses the response JSON configuration 4. Processes any mustache template variables 5. Converts the JSON to a webhook edit structure 6. Updates the interaction response with the new content",
      "usage": [
        "Active Discord bot session (Client ID) or bot token credentials",
        "Valid application ID",
        "Valid interaction token from a deferred interaction",
        "A previously sent deferred response"
      ],
      "errorCodes": [
        "ErrInvalidArg",
        "ErrJson"
      ]
    }
  }
}